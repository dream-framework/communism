(function(){const log=document.querySelector('#botPanel .log');function push(r,t){const d=document.createElement('div');d.className='msg '+(r==='user'?'user':'bot');d.textContent=t;log.appendChild(d);log.scrollTop=log.scrollHeight;}async function ask(q){push('user',q);try{const res=await fetch('/api/groq_chat',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({message:q})});const j=await res.json();push('assistant',j.reply||'[no reply]');}catch(e){push('assistant','Error: '+e.message);} }window.addEventListener('DOMContentLoaded',()=>{const t=document.getElementById('botToggle'),p=document.getElementById('botPanel'),i=document.getElementById('botInput'),s=document.getElementById('botSend');if(!t)return;t.addEventListener('click',()=>{p.style.display=(p.style.display==='none'||!p.style.display)?'block':'none';});s.addEventListener('click',()=>{const q=i.value.trim();if(!q)return;i.value='';ask(q);});i.addEventListener('keydown',(e)=>{if(e.key==='Enter'){e.preventDefault();s.click();}});});})();