name: Mastodon #sum Summarizer
on:
 schedule:
   - cron: "*/2 * * * *"
 workflow_dispatch:
jobs:
 run:
   runs-on: ubuntu-latest
   steps:
     - uses: actions/checkout@v4
     - uses: actions/setup-python@v5
       with:
         python-version: "3.11"
     - run: pip install -r requirements.txt
     - run: python summarize.py
       env:
         MASTODON_INSTANCE: ${{ secrets.MASTODON_INSTANCE }}
         MASTODON_TOKEN: ${{ secrets.MASTODON_TOKEN }}
         GROQ_API_KEY: ${{ secrets.GROQ_API_KEY }}
     - run: |
         git config user.name "summarizer-bot"
         git config user.email "bot@users.noreply.github.com"
         git add state.json
         git commit -m "Update state" || true
         git push
